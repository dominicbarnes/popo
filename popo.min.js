/*! Popo - v0.9.0dev - 18/5/2013
 * https://github.com/niklasramo/popo
 * Copyright (c) 2012, 2013 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license */
(function(j,g){var b="popo",i=j.parseFloat,d=j.Math,f=d.abs,x=({}).toString,z="left",E="right",F="top",p="bottom",c="center",s="width",e="height",o="function",t="string",k="getBoundingClientRect",G,y,B,w;function D(H){return H.self===G.self}function h(H){return typeof H===t?(H.trim?H.trim():H.replace(/^\s+|\s+$/g,"")):H}function u(L){var J={},H=L.length,I,K;for(I=0;I<H;I++){for(K in L[I]){J[K]=L[I][K]}}return J}function q(H,I){return G.getComputedStyle?(G.getComputedStyle(H,null).getPropertyValue(I)):H.currentStyle?(H.currentStyle[I]):(null)}function m(H){var I=H.offsetParent,J="style" in H&&q(H,"position");if(J=="fixed"){I=G}else{if(J=="absolute"){I=H===w?B:I||y;while("style" in I&&q(I,"position")=="static"){I=I===w?B:I.offsetParent||y}}}return I}function l(H){return D(H)?(B.clientWidth):H===y||H===B?(d.max(B.scrollWidth,w.scrollWidth)):(H[k]&&s in H[k]()?H[k]()[s]:H.offsetWidth)}function a(H){return D(H)?(B.clientHeight):H===y||H===B?(d.max(B.scrollHeight,w.scrollHeight)):(H[k]&&e in H[k]()?H[k]()[e]:H.offsetHeight)}function v(I,O){var K=0,H=0,L=G.pageXOffset||B.scrollLeft||w.scrollLeft||0,N=G.pageYOffset||B.scrollTop||w.scrollTop||0,J=I,M;if(D(I)){K=L;H=N}else{if(I!==y&&I!==B){M=I[k]&&I[k]();if(M&&z in M&&F in M){K+=M[z]+L-(B.clientLeft||0);H+=M[F]+N-(B.clientTop||0)}else{while(J){K+=D(J)?L:J.offsetLeft||0;H+=D(J)?N:J.offsetTop||0;J=m(J)}}if(O){K+=I.clientLeft||0;H+=I.clientTop||0}}}return{left:K,top:H}}function n(I,T){var J=j[b].defaults,L,H,R,K,M,S,O,N,Q,P;T=x.call(T)==="[object Object]"?u([J,T]):u([J]);for(H in T){T[H]=h(typeof T[H]!==o?T[H]:H=="onCollision"?T[H]:T[H](I));if(H=="position"){T[H]=T[H].split(" ")}if(H=="offset"){R={x:0,y:0};K=typeof T[H]===t?T[H].split(","):[];M=1000000;for(L=K.length;L--;){S=h(K[L]).split(" ");O=i(S[0])||0;N=S.length>1?i(S[1])||0:O;if(S[0].indexOf("deg")>-1&&S.length>1&&N){R.x+=d.round((d.cos(O*(d.PI/180))*N)*M)/M;R.y+=d.round((d.sin(O*(d.PI/180))*N)*M)/M}else{R.x+=O;R.y+=N}}T[H]=R}if(H=="onCollision"){R=typeof T[H]===o?T[H]:null;if(typeof T[H]===t&&T[H].length>0){Q=T[H].split(" ");P=Q.length;if(P>0&&P<5){R={left:Q[0],top:P>1?Q[1]:Q[0],right:P>2?Q[2]:Q[0],bottom:P>3?Q[3]:P<2?Q[0]:Q[1]}}}T[H]=R}}return T}function r(L,K,J,I){var H={};H[z+z]=H[F+F]=K;H[z+c]=H[F+c]=K+(J/2);H[z+E]=H[F+p]=K+J;H[c+z]=H[c+F]=K-(I/2);H[c+c]=K+(J/2)-(I/2);H[c+E]=H[c+p]=K+J-(I/2);H[E+z]=H[p+F]=K-I;H[E+c]=H[p+c]=K-I+(J/2);H[E+E]=H[p+p]=K-I+J;return H[L]}function A(H,T,L){var P=0,Q="push",I=Q+"!",K=L?F:z,S=L?p:E,N=H[K],O=H[S],R=T[K],M=T[S],J=R+M;if((N==Q||N==I)&&(O==Q||O==I)&&(R<0||M<0)){if(R<M){P-=J<0?R+f(J/2):R}if(M<R){P+=J<0?M+f(J/2):M}R+=P;M-=P;if(N==I&&O!=I&&R<0){P-=R}if(O==I&&N!=I&&M<0){P+=M}}else{if((N==I||N==Q)&&R<0){P-=R}else{if((O==I||O==Q)&&M<0){P+=M}}}return P}function C(J,K,M){y=J.ownerDocument;G=y.defaultView||y.parentWindow;B=y.documentElement;w=y.body;M=n(J,typeof K===t?M:K);var V=M.onCollision,S,R,P=l(J),Q=a(J),L=v(m(J),1),Y,H=M.base,X,N,W,I=M.container,T,U,O;x.call(H)==="[object Array]"?(X=N=0,W=v(H[2]||G),W[z]+=H[0],W[F]+=H[1]):(X=l(H),N=a(H),W=v(H));S={left:r(M.position[0]+M.position[2],W[z]+M.offset.x-L[z],X,P),top:r(M.position[1]+M.position[3],W[F]+M.offset.y-L[F],N,Q)};if(I){x.call(I)==="[object Array]"?(T=U=0,O=v(I[2]||G),O[z]+=I[0],O[F]+=I[1]):(T=l(I),U=a(I),O=v(I));R={left:S[z]+L[z]-O[z],right:(O[z]+T)-(S[z]+L[z]+P),top:S[F]+L[F]-O[F],bottom:(O[F]+U)-(S[F]+L[F]+Q)};if(typeof V===o){Y=v(J);V(S,R,{target:{element:J,width:P,height:Q,offset:Y,position:{left:Y[z]>L[z]?f(Y[z]-L[z]):-f(Y[z]-L[z]),top:Y[F]>L[F]?f(Y[F]-L[F]):-f(Y[F]-L[F])}},base:{element:H,width:X,height:N,offset:W},container:{element:I,width:T,height:U,offset:O}})}else{if(V){S[z]+=A(V,R);S[F]+=A(V,R,1)}}}if(K==="get"){return S}else{J.style[z]=S[z]+"px";J.style[F]=S[F]+"px";return J}}j[b]=C;j[b].defaults={base:function(H){H=H.ownerDocument;return H.defaultView||H.parentWindow},position:"center center center center",offset:"0",container:null,onCollision:"none"}})(window);