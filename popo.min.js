/*!
 * Popo JS - v0.7.5 - 8/2/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(C,k){var E="popo",g=C.document,f=g.documentElement,B=g.body,u=C.Math,t=u.abs,c={},e=Object.prototype.toString,K="left",x="right",j="top",G="bottom",H="center",n="function",F="number",s={nw:[x,G,K,j],n:[H,G,H,j],ne:[K,G,x,j],e:[K,H,x,H],se:[K,j,x,G],s:[H,j,H,G],sw:[x,j,K,G],w:[x,H,K,H],center:[H,H,H,H]};c[K+K]=c[j+j]=function(P,O,N){return P};c[K+H]=c[j+H]=function(P,O,N){return P+(O/2)};c[K+x]=c[j+G]=function(P,O,N){return P+O};c[H+K]=c[H+j]=function(P,O,N){return P-(N/2)};c[H+H]=function(P,O,N){return P+(O/2)-(N/2)};c[H+x]=c[H+G]=function(P,O,N){return P+O-(N/2)};c[x+K]=c[G+j]=function(P,O,N){return P-N};c[x+H]=c[G+H]=function(P,O,N){return P-N+(O/2)};c[x+x]=c[G+G]=function(P,O,N){return P-N+O};function L(N){return e.call(N)==="[object global]"}function m(N){return e.call(N)==="[object HTMLDocument]"}function D(N){return e.call(N)==="[object HTMLHtmlElement]"}function p(N){return e.call(N)==="[object HTMLBodyElement]"}function b(N){return typeof String.prototype.trim===n?N.trim():N.replace(/^\s+|\s+$/g,"")}function A(N){var P={},O,Q;for(O=0;O<N.length;O++){for(Q in N[O]){P[Q]=N[O][Q]}}return P}function I(N){if(L(N)){return f.clientWidth||B.clientWidth}else{if(m(N)){return u.max(f.clientWidth,f.offsetWidth,f.scrollWidth,B.scrollWidth,B.offsetWidth)}else{return N.getBoundingClientRect().width||N.offsetWidth}}}function v(N){if(L(N)){return f.clientHeight||B.clientHeight}else{if(m(N)){return u.max(f.clientHeight,f.offsetHeight,f.scrollHeight,B.scrollHeight,B.offsetHeight)}else{return N.getBoundingClientRect().height||N.offsetHeight}}}function d(){return typeof C.pageXOffset===F?C.pageXOffset:f.scrollLeft||B.scrollLeft}function o(){return typeof C.pageYOffset===F?C.pageYOffset:f.scrollTop||B.scrollTop}function l(O,R){var Q=0,N=0,P;if(L(O)){Q=d();N=o()}else{if(!m(O)){P=O.getBoundingClientRect();if(typeof P!=="undefined"){Q=P.left+d();N=P.top+o();if(R===true){Q+=O.clientLeft;N+=O.clientTop}}}}return{left:Q,top:N}}function J(N){if(N.style.position){return N.style.position}else{if(N.currentStyle){return N.currentStyle.position}else{if(g.defaultView&&g.defaultView.getComputedStyle){return g.defaultView.getComputedStyle(N,null).getPropertyValue("position")}else{return"static"}}}}function h(N){var O;if(D(N)){O=g}else{if(p(N)){O=f}else{O=N.offsetParent;while(!D(O)&&J(O)==="static"){O=p(O)?f:O.offsetParent}}}return O}function r(R){var O=J(R),U,Q,T,P,S,N;if(O==="fixed"){U={left:0,top:0}}else{if(O==="absolute"){U=l(h(R),true)}else{if(O!=="relative"){U=l(R)}else{Q=R.style;T=Q.left;P=Q.right;S=Q.top;N=Q.bottom;Q.left=Q.right=Q.top=Q.bottom="auto";U=l(R);Q.left=T;Q.right=P;Q.top=S;Q.bottom=N}}}return U}function q(Q,S,O){var R=Q.className.split(" "),N=R.length,P;for(P=0;P<N;P++){if(R[P].substring(0,S.length)===S){R.splice(P,1)}}if(O!==""){R.push(O)}Q.className=R.join(" ")}function z(P){var O=typeof P==="string"&&P.length!==0?P.split(" "):"",N=O.length;if(N>0&&N<5){return{left:O[0],top:N>1?O[1]:O[0],right:N>2?O[2]:O[0],bottom:N===4?O[3]:(N===1?O[0]:O[1])}}else{return null}}function i(S){var P={x:0,y:0},R=1000000,T=S.split(","),N=T.length,W,V,O,U,Q;for(Q=0;Q<N;Q++){W=b(T[Q]).split(" ");V=W.length;if(V===2&&W[0].indexOf("deg")!==-1){O=parseFloat(W[0]);U=parseFloat(W[1]);if(typeof O===F&&typeof U===F&&U!==0){P.x+=u.round((u.cos(O*(u.PI/180))*U)*R)/R;P.y+=u.round((u.sin(O*(u.PI/180))*U)*R)/R}}else{if(V===1||V===2){P.x+=parseFloat(W[0]);P.y+=V===1?parseFloat(W[0]):parseFloat(W[1])}}}return P}function M(O){var N=e.call(O)==="[object Object]"?A([C[E].defaults,O]):A([C[E].defaults]),P;for(P in N){if(typeof N[P]==="string"){N[P]=b(N[P])}}if(N.setClass){N.cls=E+"-"+N.position.replace(/\s+/g,"-")}N.position=N.position.split(" ");N.position=N.position.length===1?s[N.position[0]].slice(0):N.position;N.offset=i(N.offset);if(N.container!==null&&typeof N.onCollision!==n){N.onCollision=z(N.onCollision)}return N}function w(P,N,R,O,T,S,Q){return{left:R.left+O.left-Q.left,right:(Q.left+T)-(R.left+O.left+P),top:R.top+O.top-Q.top,bottom:(Q.top+S)-(R.top+O.top+N)}}function a(Y,V,Q,P,Z,ab,T,U,N){var X="push",W="push!",O=[[K,x],[j,G]],aa,S,R;for(R=0;R<2;R++){aa=O[R][0];S=O[R][1];if((N[aa]===X||N[aa]===W)&&(N[S]===X||N[S]===W)&&(U[aa]<0||U[S]<0)){if(U[aa]>U[S]){if(t(U[S])<=t(U[aa])){Q[aa]-=t(U[S])}else{Q[aa]-=((t(U[aa])+t(U[S]))/2)}}else{if(U[aa]<U[S]){if(t(U[aa])<=t(U[S])){target.position[aa]+=t(U[aa])}else{Q[aa]+=((t(U[aa])+t(U[S]))/2)}}}U=w(Y,V,Q,P,Z,ab,T);if(N[aa]===W&&U[aa]<0){Q[aa]+=t(U[aa])}else{if(N[S]===W&&U[S]<0){Q[aa]-=t(U[S])}}}else{if((N[aa]===W||N[aa]===X)&&U[aa]<0){Q[aa]+=t(U[aa])}else{if((N[S]===W||N[S]===X)&&U[S]<0){Q[aa]-=t(U[S])}}}}}function y(Q,X,ad){var ab=M(ad),T=I(X),U=v(X),Z=r(X),W,N=ab.base,ag=I(N),R=v(N),af=l(N),P,Y,ac,S,ae,aa={element:X,width:T,height:U,zeroPointOffset:Z},V={element:N,width:ag,height:R,offset:af},O;if(ab.setClass&&(" "+X.className+" ").indexOf(" "+ab.cls+" ")===-1){q(X,E,ab.cls)}W=aa.position={left:c[ab.position[0]+ab.position[2]](af.left+ab.offset.x-Z.left,ag,T),top:c[ab.position[1]+ab.position[3]](af.top+ab.offset.y-Z.top,R,U)};if(ab.container!==null){P=ab.container;Y=I(P);ac=v(P);S=l(P);ae=w(T,U,W,Z,Y,ac,S);O={element:P,width:Y,height:ac,offset:S,overflow:ae};if(typeof ab.onCollision===n){ab.onCollision(aa,V,O)}else{if(ab.onCollision!==null){a(T,U,W,Z,Y,ac,S,ae,ab.onCollision)}}}if(typeof ab.onExecution===n){ab.onExecution(aa,V,O)}if(Q==="set"){X.style.left=W.left+"px";X.style.top=W.top+"px"}else{return W}}C[E]={set:function(N,O){y("set",N,O);return this},get:function(N,O){return y("get",N,O)},defaults:{position:H,offset:"0",base:C,setClass:false,container:null,onCollision:"push",onExecution:null}}})(window);