/*!
 * Popo JS - v0.7.9.9 - 1/3/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(o,l){var a="popo",F=o.document,A=F.documentElement,q=F.body,f=Math,i=f.abs,n=parseFloat,x="left",B="right",C="top",u="bottom",b="center",r="function",v="number",d="getBoundingClientRect",p=Object.prototype.toString;function w(G){return typeof String.prototype.trim===r?G.trim():G.replace(/^\s+|\s+$/g,"")}function k(G){var I={},H,J;for(H=0;H<G.length;H++){for(J in G[H]){I[J]=G[H][J]}}return I}function h(G,H){return F.defaultView&&F.defaultView.getComputedStyle?(F.defaultView.getComputedStyle(G,null).getPropertyValue(H)):G.currentStyle?(G.currentStyle[H]):(null)}function c(G){return G===o?(o.innerWidth||A.clientWidth||q.clientWidth):G===F?(f.max(A.clientWidth,A.offsetWidth,A.scrollWidth,q.scrollWidth,q.offsetWidth)):(G[d]().width||G.offsetWidth)}function t(G){return G===o?(o.innerHeight||A.clientHeight||q.clientHeight):G===F?(f.max(A.clientHeight,A.offsetHeight,A.scrollHeight,q.scrollHeight,q.offsetHeight)):(G[d]().height||G.offsetHeight)}function g(H,M){var J=0,G=0,K=o.pageXOffset||A.scrollLeft||q.scrollLeft,L=o.pageYOffset||A.scrollTop||q.scrollTop,I;if(H===o){J=K;G=L}else{if(H!==F&&H!==A){I=H[d]()||0;J+=I[x]+K-A.clientLeft;G+=I[C]+L-A.clientTop;if(M){J+=H.clientLeft;G+=H.clientTop}}}return{left:J,top:G}}function s(G){var H=G===q?A:G.offsetParent||F;while(H!==F&&h(H,"position")==="static"){H=H===q?A:H.offsetParent||F}return H}function D(N){var I={x:0,y:0},K=1000000,L=typeof N===r?w(N()).split(","):N.split(","),G=L.length,P,O,H,M,J;for(J=0;J<G;J++){P=w(L[J]).split(" ");O=P.length;if(O===2&&P[0].indexOf("deg")!==-1){H=n(P[0]);M=n(P[1]);if(typeof H===v&&typeof M===v&&M!==0){I.x+=f.round((f.cos(H*(f.PI/180))*M)*K)/K;I.y+=f.round((f.sin(H*(f.PI/180))*M)*K)/K}}else{if(O===1||O===2){I.x+=n(P[0]);I.y+=O===1?n(P[0]):n(P[1])}}}return I}function z(I){var H=typeof I==="string"&&I.length>0?I.split(" "):"",G=H.length;if(G>0&&G<5){return{left:H[0],top:G>1?H[1]:H[0],right:G>2?H[2]:H[0],bottom:G===4?H[3]:G===1?H[0]:H[1]}}else{return null}}function y(H){var G=p.call(H)==="[object Object]"?k([o[a].defaults,H]):k([o[a].defaults]),I;for(I in G){if(typeof G[I]==="string"){G[I]=w(G[I])}}G.position=typeof G.position===r?G.position().split(" "):G.position.split(" ");G.base=typeof G.base===r?G.base():G.base;G.container=typeof G.container===r?G.container():G.container;G.offset=D(G.offset);return G}function e(K,J,I,H){var G={};G[x+x]=G[C+C]=J;G[x+b]=G[C+b]=J+(I/2);G[x+B]=G[C+u]=J+I;G[b+x]=G[b+C]=J-(H/2);G[b+b]=J+(I/2)-(H/2);G[b+B]=G[b+u]=J+I-(H/2);G[B+x]=G[u+C]=J-H;G[B+b]=G[u+b]=J-H+(I/2);G[B+B]=G[u+u]=J-H+I;return G[K]}function j(H,G,J,M,L,K,I){return{left:J[x]+M[x]-I[x],right:(I[x]+L)-(J[x]+M[x]+H),top:J[C]+M[C]-I[C],bottom:(I[C]+K)-(J[C]+M[C]+G)}}function m(R,N,K,G,S,U,M,T,H){var Q="push",P="push!",J=[[x,B],[C,u]],O,I,L;for(L=0;L<2;L++){O=J[L][0];I=J[L][1];if((H[O]===Q||H[O]===P)&&(H[I]===Q||H[I]===P)&&(T[O]<0||T[I]<0)){if(T[O]>T[I]){if(i(T[I])<=i(T[O])){K[O]-=i(T[I])}else{K[O]-=((i(T[O])+i(T[I]))/2)}}else{if(T[O]<T[I]){if(i(T[O])<=i(T[I])){K[O]+=i(T[O])}else{K[O]+=((i(T[O])+i(T[I]))/2)}}}T=j(R,N,K,G,S,U,M);if(H[O]===P&&T[O]<0){K[O]+=i(T[O])}else{if(H[I]===P&&T[I]<0){K[O]-=i(T[I])}}}else{if((H[O]===P||H[O]===Q)&&T[O]<0){K[O]+=i(T[O])}else{if((H[I]===P||H[I]===Q)&&T[I]<0){K[O]-=i(T[I])}}}}}function E(I,P,U){var R=y(U),V=R.onCollision,O,T,M=c(P),N=t(P),J=h(P,"position")==="fixed"?g(o):g(s(P),true),Y,G=R.base,X,K,W,H=R.container,Q,S,L;p.call(G)==="[object Array]"?(X=K=0,W=g(G[2]||o),W[x]+=G[0],W[C]+=G[1]):(X=c(G),K=t(G),W=g(G));O={left:e(R.position[0]+R.position[2],W[x]+R.offset.x-J[x],X,M),top:e(R.position[1]+R.position[3],W[C]+R.offset.y-J[C],K,N)};if(H){p.call(H)==="[object Array]"?(Q=S=0,L=g(H[2]||o),L[x]+=H[0],L[C]+=H[1]):(Q=c(H),S=t(H),L=g(H));T=j(M,N,O,J,Q,S,L);if(typeof V===r){Y=g(P);V(O,T,{target:{element:P,width:M,height:N,offset:Y,position:{left:Y[x]>J[x]?i(Y[x]-J[x]):-i(Y[x]-J[x]),top:Y[C]>J[C]?i(Y[C]-J[C]):-i(Y[C]-J[C])}},base:{element:G,width:X,height:K,offset:W},container:{element:H,width:Q,height:S,offset:L}})}else{V=z(V);if(V){m(M,N,O,J,Q,S,L,T,V)}}}if(I==="set"){P.style[x]=O[x]+"px";P.style[C]=O[C]+"px"}else{return O}}o[a]={set:function(G,H){E("set",G,H);return this},get:function(G,H){return E("get",G,H)},defaults:{base:o,position:"center center center center",offset:"0",container:null,onCollision:"push"}}})(window);