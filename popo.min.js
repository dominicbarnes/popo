/*!
 * Popo JS - v0.7.9.4 - 25/2/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(m,k){var a="popo",E=m.document,z=E.documentElement,o=E.body,h=Math.abs,w="left",A="right",B="top",s="bottom",b="center",p="function",t="number",d="getBoundingClientRect",n=Object.prototype.toString;function v(F){return typeof String.prototype.trim===p?F.trim():F.replace(/^\s+|\s+$/g,"")}function j(F){var H={},G,I;for(G=0;G<F.length;G++){for(I in F[G]){H[I]=F[G][I]}}return H}function g(F,G){return F.style&&F.style[G]?(F.style[G]):F.currentStyle?(F.currentStyle[G]):E.defaultView&&E.defaultView.getComputedStyle?(E.defaultView.getComputedStyle(F,null).getPropertyValue(G)):(null)}function c(F){return F===m?(z.clientWidth||o.clientWidth):F===E?(Math.max(z.clientWidth,z.offsetWidth,z.scrollWidth,o.scrollWidth,o.offsetWidth)):(F[d]().width||F.offsetWidth)}function r(F){return F===m?(z.clientHeight||o.clientHeight):F===E?(Math.max(z.clientHeight,z.offsetHeight,z.scrollHeight,o.scrollHeight,o.offsetHeight)):(F[d]().height||F.offsetHeight)}function f(H,F){var J=0,I=0,N=m.pageXOffset||z.scrollLeft||o.scrollLeft,G=m.pageYOffset||z.scrollTop||o.scrollTop,L,K,M;if(H===m){J=N;I=G}else{if(H!==E&&H!==z){M=H[d]()||0;J+=M[w]+N-z.clientLeft;I+=M[B]+G-z.clientTop;if(F){J+=H.clientLeft;I+=H.clientTop}}}return{left:J,top:I}}function q(F){var G=F===o?z:F.offsetParent||E;while(G!==E&&g(G,"position")==="static"){G=G===o?z:G.offsetParent||E}return G}function u(I){var J=g(I,"position"),M,H,L,G,K,F;J==="fixed"?(M=f(m)):J==="absolute"?(M=f(q(I),true)):J==="relative"?(H=I.style,L=H[w],G=H[A],K=H[B],F=H[s],H[w]=H[A]=H[B]=H[s]="auto",M=f(I),H[w]=L,H[A]=G,H[B]=K,H[s]=F):(M=f(I));return M}function C(M){var H={x:0,y:0},J=1000000,K=typeof M===p?v(M()).split(","):M.split(","),F=K.length,O,N,G,L,I;for(I=0;I<F;I++){O=v(K[I]).split(" ");N=O.length;if(N===2&&O[0].indexOf("deg")!==-1){G=parseFloat(O[0]);L=parseFloat(O[1]);if(typeof G===t&&typeof L===t&&L!==0){H.x+=Math.round((Math.cos(G*(Math.PI/180))*L)*J)/J;H.y+=Math.round((Math.sin(G*(Math.PI/180))*L)*J)/J}}else{if(N===1||N===2){H.x+=parseFloat(O[0]);H.y+=N===1?parseFloat(O[0]):parseFloat(O[1])}}}return H}function y(H){var G=typeof H==="string"&&H.length>0?H.split(" "):"",F=G.length;if(F>0&&F<5){return{left:G[0],top:F>1?G[1]:G[0],right:F>2?G[2]:G[0],bottom:F===4?G[3]:F===1?G[0]:G[1]}}else{return null}}function x(G){var F=n.call(G)==="[object Object]"?j([m[a].defaults,G]):j([m[a].defaults]),H;for(H in F){if(typeof F[H]==="string"){F[H]=v(F[H])}}F.position=typeof F.position===p?F.position().split(" "):F.position.split(" ");F.base=typeof F.base===p?F.base():F.base;F.container=typeof F.container===p?F.container():F.container;F.offset=C(F.offset);return F}function e(J,I,H,G){var F={};F[w+w]=F[B+B]=I;F[w+b]=F[B+b]=I+(H/2);F[w+A]=F[B+s]=I+H;F[b+w]=F[b+B]=I-(G/2);F[b+b]=I+(H/2)-(G/2);F[b+A]=F[b+s]=I+H-(G/2);F[A+w]=F[s+B]=I-G;F[A+b]=F[s+b]=I-G+(H/2);F[A+A]=F[s+s]=I-G+H;return F[J]}function i(G,F,I,L,K,J,H){return{left:I[w]+L[w]-H[w],right:(H[w]+K)-(I[w]+L[w]+G),top:I[B]+L[B]-H[B],bottom:(H[B]+J)-(I[B]+L[B]+F)}}function l(Q,M,J,F,R,T,L,S,G){var P="push",O="push!",I=[[w,A],[B,s]],N,H,K;for(K=0;K<2;K++){N=I[K][0];H=I[K][1];if((G[N]===P||G[N]===O)&&(G[H]===P||G[H]===O)&&(S[N]<0||S[H]<0)){if(S[N]>S[H]){if(h(S[H])<=h(S[N])){J[N]-=h(S[H])}else{J[N]-=((h(S[N])+h(S[H]))/2)}}else{if(S[N]<S[H]){if(h(S[N])<=h(S[H])){J[N]+=h(S[N])}else{J[N]+=((h(S[N])+h(S[H]))/2)}}}S=i(Q,M,J,F,R,T,L);if(G[N]===O&&S[N]<0){J[N]+=h(S[N])}else{if(G[H]===O&&S[H]<0){J[N]-=h(S[H])}}}else{if((G[N]===O||G[N]===P)&&S[N]<0){J[N]+=h(S[N])}else{if((G[H]===O||G[H]===P)&&S[H]<0){J[N]-=h(S[H])}}}}}function D(H,O,T){var Q=x(T),U=Q.onCollision,N,S,L=c(O),M=r(O),I=u(O),X,F=Q.base,W,J,V,G=Q.container,P,R,K;n.call(F)==="[object Array]"?(W=J=0,V=f(F[2]||m),V[w]+=F[0],V[B]+=F[1]):(W=c(F),J=r(F),V=f(F));N={left:e(Q.position[0]+Q.position[2],V[w]+Q.offset.x-I[w],W,L),top:e(Q.position[1]+Q.position[3],V[B]+Q.offset.y-I[B],J,M)};if(G){n.call(G)==="[object Array]"?(P=R=0,K=f(G[2]||m),K[w]+=G[0],K[B]+=G[1]):(P=c(G),R=r(G),K=f(G));S=i(L,M,N,I,P,R,K);if(typeof U===p){X=f(O);U(N,S,{target:{element:O,width:L,height:M,offset:X,position:{left:X[w]>I[w]?h(X[w]-I[w]):-h(X[w]-I[w]),top:X[B]>I[B]?h(X[B]-I[B]):-h(X[B]-I[B])}},base:{element:F,width:W,height:J,offset:V},container:{element:G,width:P,height:R,offset:K}})}else{U=y(U);if(U){l(L,M,N,I,P,R,K,S,U)}}}if(H==="set"){O.style[w]=N[w]+"px";O.style[B]=N[B]+"px"}else{return N}}m[a]={set:function(F,G){D("set",F,G);return this},get:function(F,G){return D("get",F,G)},defaults:{base:m,position:"center center center center",offset:"0",container:null,onCollision:"push"}}})(window);