/*!
 * Popo JS - v0.7.4 - 7/2/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(o,j){var d="popo",O=o.document,I=O.documentElement,s=O.body,B=o.Math,E={},C="left",x="right",w="top",L="bottom",K="center",z={nw:[x,L,C,w],n:[K,L,K,w],ne:[C,L,x,w],e:[C,K,x,K],se:[C,w,x,L],s:[K,w,K,L],sw:[x,w,C,L],w:[x,K,C,K],center:[K,K,K,K]};E[C+C]=E[w+w]=function(b){return b};E[C+K]=E[w+K]=function(b,c){return b+(c/2)};E[C+x]=E[w+L]=function(b,c){return b+c};E[K+C]=E[K+w]=function(b,c,l){return b-(l/2)};E[K+K]=function(b,c,l){return b+(c/2)-(l/2)};E[K+x]=E[K+L]=function(b,c,l){return b+c-(l/2)};E[x+C]=E[L+w]=function(b,c,l){return b-l};E[x+K]=E[L+K]=function(b,c,l){return b-l+(c/2)};E[x+x]=E[L+L]=function(b,c,l){return b-l+c};function q(b){return Object.prototype.toString.call(b)==="[object global]"}function h(b){return Object.prototype.toString.call(b)==="[object HTMLDocument]"}function G(b){return Object.prototype.toString.call(b)==="[object HTMLHtmlElement]"}function p(b){return Object.prototype.toString.call(b)==="[object HTMLBodyElement]"}function D(b){return typeof String.prototype.trim==="function"?b.trim():b.replace(/^\s+|\s+$/g,"")}function i(b){var l={},c,m;for(c=0;c<b.length;c++){for(m in b[c]){l[m]=b[c][m]}}c=m=null;return l}function e(b){if(q(b)){return I.clientWidth||s.clientWidth}else{if(h(b)){return B.max(I.clientWidth,I.offsetWidth,I.scrollWidth,s.scrollWidth,s.offsetWidth)}else{return b.getBoundingClientRect().width||b.offsetWidth}}}function v(b){if(q(b)){return I.clientHeight||s.clientHeight}else{if(h(b)){return B.max(I.clientHeight,I.offsetHeight,I.scrollHeight,s.scrollHeight,s.offsetHeight)}else{return b.getBoundingClientRect().height||b.offsetHeight}}}function F(){return typeof o.pageXOffset==="number"?o.pageXOffset:I.scrollLeft||s.scrollLeft}function f(){return typeof o.pageYOffset==="number"?o.pageYOffset:I.scrollTop||s.scrollTop}function g(c,r){var m=0,b=0,l;if(q(c)){m=F();b=f()}else{if(!h(c)){l=c.getBoundingClientRect();if(typeof l!=="undefined"){m=l.left+F();b=l.top+f();if(r){m+=c.clientLeft;b+=c.clientTop}}}}l=null;return{left:m,top:b}}function n(b){if(b.style.position){return b.style.position}else{if(b.currentStyle){return b.currentStyle.position}else{if(O.defaultView&&O.defaultView.getComputedStyle){return O.defaultView.getComputedStyle(b,null).getPropertyValue("position")}else{return"static"}}}}function u(b){var c;if(G(b)){c=O}else{if(p(b)){c=I}else{c=b.offsetParent;while(!G(c)&&n(c)==="static"){c=p(c)?I:c.offsetParent}}}return c}function A(r){var c=n(r),Q,m,P,l,t,b;if(c==="fixed"){Q={left:0,top:0}}else{if(c==="absolute"){Q=g(u(r),true)}else{if(c!=="relative"){Q=g(r)}else{m=r.style;P=m.left;l=m.right;t=m.top;b=m.bottom;m.left=m.right=m.top=m.bottom="auto";Q=g(r);m.left=P;m.right=l;m.top=t;m.bottom=b}}}c=m=P=l=t=b=null;return Q}function N(r,m,c){var t=r.className.split(" "),b=t.length,l;for(l=0;l<b;l++){if(t[l].substring(0,m.length)===m){t.splice(l,1)}}if(c!==""){t.push(c)}r.className=t.join(" ");t=b=l=null}function H(l){var c=typeof l==="string"&&l.length!==0?l.split(" "):"",b=c.length;if(b>0&&b<5){return{left:c[0],top:b>1?c[1]:c[0],right:b>2?c[2]:c[0],bottom:b===4?c[3]:(b===1?c[0]:c[1])}}else{c=b=null;return null}}function J(b){var m={x:0,y:0},t=1000000,P=b.split(","),c=P.length,S,R,l,Q,r;for(r=0;r<c;r++){S=D(P[r]).split(" ");R=S.length;if(R===2&&S[0].indexOf("deg")!==-1){l=parseFloat(S[0]);Q=parseFloat(S[1]);if(typeof l==="number"&&typeof Q==="number"&&Q!==0){m.x+=B.round((B.cos(l*(B.PI/180))*Q)*t)/t;m.y+=B.round((B.sin(l*(B.PI/180))*Q)*t)/t}}else{if(R===1||R===2){m.x+=parseFloat(S[0]);m.y+=R===1?parseFloat(S[0]):parseFloat(S[1])}}}t=P=c=S=R=l=Q=r=null;return m}function a(b){var c=Object.prototype.toString.call(b)==="[object Object]"?i([o[d].defaults,b]):i([o[d].defaults]),l;for(l in c){if(typeof c[l]==="string"){c[l]=D(c[l])}}if(c.setClass){c._className=d+"-"+c.position.replace(/\s+/g,"-")}c.position=c.position.split(" ");c.position=c.position.length===1?z[c.position[0]].slice(0):c.position;c.offset=J(c.offset);if(c.container!==null&&typeof c.onCollision!=="function"){c.onCollision=H(c.onCollision)}l=null;return c}function y(c,b){return{left:c.position.left+c.zeroPointOffset.left-b.offset.left,right:(b.offset.left+b.width)-(c.position.left+c.zeroPointOffset.left+c.width),top:c.position.top+c.zeroPointOffset.top-b.offset.top,bottom:(b.offset.top+b.height)-(c.position.top+c.zeroPointOffset.top+c.height)}}function k(t,P,b){var r=[["left","right"],["top","bottom"]],m,l,c;for(c=0;c<2;c++){m=r[c][0];l=r[c][1];if((t.onCollision[m]==="push"||t.onCollision[m]==="push!")&&(t.onCollision[l]==="push"||t.onCollision[l]==="push!")&&(b.overflow[m]<0||b.overflow[l]<0)){if(b.overflow[m]>b.overflow[l]){if(B.abs(b.overflow[l])<=B.abs(b.overflow[m])){P.position[m]-=B.abs(b.overflow[l])}else{P.position[m]-=((B.abs(b.overflow[m])+B.abs(b.overflow[l]))/2)}}else{if(b.overflow[m]<b.overflow[l]){if(B.abs(b.overflow[m])<=B.abs(b.overflow[l])){P.position[m]+=B.abs(b.overflow[m])}else{P.position[m]+=((B.abs(b.overflow[m])+B.abs(b.overflow[l]))/2)}}}b.overflow=y(P,b);if(t.onCollision[m]==="push!"&&b.overflow[m]<0){P.position[m]+=B.abs(b.overflow[m])}else{if(t.onCollision[l]==="push!"&&b.overflow[l]<0){P.position[m]-=B.abs(b.overflow[l])}}}else{if((t.onCollision[m]==="push!"||t.onCollision[m]==="push")&&b.overflow[m]<0){P.position[m]+=B.abs(b.overflow[m])}else{if((t.onCollision[l]==="push!"||t.onCollision[l]==="push")&&b.overflow[l]<0){P.position[m]-=B.abs(b.overflow[l])}}}}r=m=l=c=null}function M(P,l,c){var m=a(c),t={},r={},b={};if(m.setClass&&(" "+l.className+" ").indexOf(" "+m._className+" ")===-1){N(l,d,m._className)}t.element=l;t.width=e(l);t.height=v(l);t.zeroPointOffset=A(l);r.element=m.base;r.width=e(m.base);r.height=v(m.base);r.offset=g(m.base);t.position={left:E[m.position[0]+m.position[2]](r.offset.left+m.offset.x-t.zeroPointOffset.left,r.width,t.width),top:E[m.position[1]+m.position[3]](r.offset.top+m.offset.y-t.zeroPointOffset.top,r.height,t.height)};if(m.container!==null){b.element=m.container;b.width=e(m.container);b.height=v(m.container);b.offset=g(m.container);b.overflow=y(t,b);if(typeof m.onCollision==="function"){m.onCollision(t,r,b)}else{if(m.onCollision!==null){k(m,t,b)}}}if(typeof m.onBeforeExec==="function"){if(m.container!==null){b.overflow=y(t,b)}m.onBeforeExec(t,r,b)}if(P==="set"){l.style.left=t.position.left+"px";l.style.top=t.position.top+"px";if(typeof m.onAfterExec==="function"){if(m.container!==null){b.overflow=y(t,b)}m.onAfterExec(t,r,b)}m=t=r=b=null}else{m=r=b=null;return t.position}}o[d]={set:function(b,c){M("set",b,c);return this},get:function(b,c){return M("get",b,c)},defaults:{position:"center",offset:"0",base:o,container:null,onCollision:"push",setClass:false,onBeforeExec:null,onAfterExec:null}}})(window);