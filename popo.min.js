/*!
 * Popo JS - v0.7.9 - 14/2/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(C,n){var F="popo",h=C.document,g=h.documentElement,u=h.body,w=C.Math,v=w.abs,l="left",k="right",f="top",s="bottom",t="center",E="function",r="number",D="getBoundingClientRect",m="clientWidth",J="clientHeight",e=Object.prototype.toString;function a(K){return typeof String.prototype.trim===E?K.trim():K.replace(/^\s+|\s+$/g,"")}function B(K){var M={},L,N;for(L=0;L<K.length;L++){for(N in K[L]){M[N]=K[L][N]}}return M}function H(K){return K===C?(g[m]||u[m]):K===h?(w.max(g[m],g.offsetWidth,g.scrollWidth,u.scrollWidth,u.offsetWidth)):(K[D]().width||K.offsetWidth)}function x(K){return K===C?(g[J]||u[J]):K===h?(w.max(g[J],g.offsetHeight,g.scrollHeight,u.scrollHeight,u.offsetHeight)):(K[D]().height||K.offsetHeight)}function c(){return typeof C.pageXOffset===r?C.pageXOffset:g.scrollLeft||u.scrollLeft}function q(){return typeof C.pageYOffset===r?C.pageYOffset:g.scrollTop||u.scrollTop}function p(L,O){var N=0,K=0,M;if(L===C){N=c();K=q()}else{if(L!==h){M=L[D]();if(typeof M!=="undefined"){N=M.left+c();K=M.top+q();if(O===true){N+=L.clientLeft;K+=L.clientTop}}}}return{left:N,top:K}}function I(K){return K.style.position?(K.style.position):K.currentStyle?(K.currentStyle.position):h.defaultView&&h.defaultView.getComputedStyle?(h.defaultView.getComputedStyle(K,null).getPropertyValue("position")):("static")}function i(K){var L;if(K===g){L=h}else{if(K===u){L=g}else{L=K.offsetParent;while(L!==g&&I(L)==="static"){L=L===u?g:L.offsetParent}}}return L}function o(O){var L=I(O),R,N,Q,M,P,K;L==="fixed"?(R={left:0,top:0}):L==="absolute"?(R=p(i(O),true)):L!=="relative"?(R=p(O)):(N=O.style,Q=N.left,M=N.right,P=N.top,K=N.bottom,N.left=N.right=N.top=N.bottom="auto",R=p(O),N.left=Q,N.right=M,N.top=P,N.bottom=K);return R}function j(S){var N={x:0,y:0},P=1000000,Q=typeof S===E?a(S()).split(","):S.split(","),L=Q.length,K=C.parseFloat,U,T,M,R,O;for(O=0;O<L;O++){U=a(Q[O]).split(" ");T=U.length;if(T===2&&U[0].indexOf("deg")!==-1){M=K(U[0]);R=K(U[1]);if(typeof M===r&&typeof R===r&&R!==0){N.x+=w.round((w.cos(M*(w.PI/180))*R)*P)/P;N.y+=w.round((w.sin(M*(w.PI/180))*R)*P)/P}}else{if(T===1||T===2){N.x+=K(U[0]);N.y+=T===1?K(U[0]):K(U[1])}}}return N}function A(M){var L=typeof M==="string"&&M.length!==0?M.split(" "):"",K=L.length;if(K>0&&K<5){return{left:L[0],top:K>1?L[1]:L[0],right:K>2?L[2]:L[0],bottom:K===4?L[3]:K===1?L[0]:L[1]}}else{return null}}function G(L){var K=e.call(L)==="[object Object]"?B([C[F].defaults,L]):B([C[F].defaults]),M;for(M in K){if(typeof K[M]==="string"){K[M]=a(K[M])}}K.position=typeof K.position===E?K.position().split(" "):K.position.split(" ");K.base=typeof K.base===E?K.base():K.base;K.container=typeof K.container===E?K.container():K.container;K.offset=j(K.offset);return K}function d(O,N,M,L){var K={};K[l+l]=K[f+f]=N;K[l+t]=K[f+t]=N+(M/2);K[l+k]=K[f+s]=N+M;K[t+l]=K[t+f]=N-(L/2);K[t+t]=N+(M/2)-(L/2);K[t+k]=K[t+s]=N+M-(L/2);K[k+l]=K[s+f]=N-L;K[k+t]=K[s+t]=N-L+(M/2);K[k+k]=K[s+s]=N-L+M;return K[O]}function y(L,K,N,Q,P,O,M){return{left:N.left+Q.left-M.left,right:(M.left+P)-(N.left+Q.left+L),top:N.top+Q.top-M.top,bottom:(M.top+O)-(N.top+Q.top+K)}}function b(W,S,O,K,X,Y,Q,R,L){var V="push",U="push!",N=[[l,k],[f,s]],T,M,P;for(P=0;P<2;P++){T=N[P][0];M=N[P][1];if((L[T]===V||L[T]===U)&&(L[M]===V||L[M]===U)&&(R[T]<0||R[M]<0)){if(R[T]>R[M]){if(v(R[M])<=v(R[T])){O[T]-=v(R[M])}else{O[T]-=((v(R[T])+v(R[M]))/2)}}else{if(R[T]<R[M]){if(v(R[T])<=v(R[M])){O[T]+=v(R[T])}else{O[T]+=((v(R[T])+v(R[M]))/2)}}}R=y(W,S,O,K,X,Y,Q);if(L[T]===U&&R[T]<0){O[T]+=v(R[T])}else{if(L[M]===U&&R[M]<0){O[T]-=v(R[M])}}}else{if((L[T]===U||L[T]===V)&&R[T]<0){O[T]+=v(R[T])}else{if((L[M]===U||L[M]===V)&&R[M]<0){O[T]-=v(R[M])}}}}}function z(M,T,X){var V=G(X),Y=V.onCollision,Q=H(T),R=x(T),N=o(T),S,K=V.base,ab,O,aa,L,U,W,P,Z;e.call(V.base)==="[object Array]"?(ab=O=0,aa=p(K[2]||C),aa.left+=K[0],aa.top+=K[1]):(ab=H(K),O=x(K),aa=p(K));S={left:d(V.position[0]+V.position[2],aa.left+V.offset.x-N.left,ab,Q),top:d(V.position[1]+V.position[3],aa.top+V.offset.y-N.top,O,R)};if(V.container!==null){L=V.container;U=H(L);W=x(L);P=p(L);Z=y(Q,R,S,N,U,W,P);if(typeof Y===E){Y(S,{target:{element:T,width:Q,height:R,offset:{x:N.x+S.x,y:N.y+S.y}},base:{element:K,width:ab,height:O,offset:aa},container:{element:L,width:U,height:W,offset:P,overflow:Z}})}else{Y=A(Y);if(Y!==null){b(Q,R,S,N,U,W,P,Z,Y)}}}if(M==="set"){T.style.left=S.left+"px";T.style.top=S.top+"px"}else{return S}}C[F]={set:function(K,L){z("set",K,L);return this},get:function(K,L){return z("get",K,L)},defaults:{base:C,position:"center center center center",offset:"0",container:null,onCollision:"push"}}})(window);