/*!
 * Popo JS - v0.7.9.2 - 19/2/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(n,k){var a="popo",G=n.document,B=G.documentElement,p=G.body,h=Math.abs,x="left",C="right",D="top",t="bottom",b="center",q="function",u="number",d="getBoundingClientRect",o=Object.prototype.toString;function w(H){return typeof String.prototype.trim===q?H.trim():H.replace(/^\s+|\s+$/g,"")}function j(H){var J={},I,K;for(I=0;I<H.length;I++){for(K in H[I]){J[K]=H[I][K]}}return J}function c(H){return H===n?(B.clientWidth||p.clientWidth):H===G?(Math.max(B.clientWidth,B.offsetWidth,B.scrollWidth,p.scrollWidth,p.offsetWidth)):(H[d]().width||H.offsetWidth)}function s(H){return H===n?(B.clientHeight||p.clientHeight):H===G?(Math.max(B.clientHeight,B.offsetHeight,B.scrollHeight,p.scrollHeight,p.offsetHeight)):(H[d]().height||H.offsetHeight)}function z(){return typeof n.pageXOffset===u?n.pageXOffset:B.scrollLeft||p.scrollLeft}function e(){return typeof n.pageYOffset===u?n.pageYOffset:B.scrollTop||p.scrollTop}function g(I,L){var K=0,H=0,J;if(I===n){K=z();H=e()}else{if(I!==G){J=I[d]();if(typeof J!=="undefined"){K=J[x]+z();H=J[D]+e();if(L){K+=I.clientLeft;H+=I.clientTop}}}}return{left:K,top:H}}function m(H){return H.style.position?(H.style.position):H.currentStyle?(H.currentStyle.position):G.defaultView&&G.defaultView.getComputedStyle?(G.defaultView.getComputedStyle(H,null).getPropertyValue("position")):("static")}function r(H){var I;if(H===B){I=G}else{if(H===p){I=B}else{I=H.offsetParent;while(I!==B&&m(I)==="static"){I=I===p?B:I.offsetParent}}}return I}function v(L){var I=m(L),O,K,N,J,M,H;I==="fixed"?(O=g(n)):I==="absolute"?(O=g(r(L),true)):I==="relative"?(K=L.style,N=K[x],J=K[C],M=K[D],H=K[t],K[x]=K[C]=K[D]=K[t]="auto",O=g(L),K[x]=N,K[C]=J,K[D]=M,K[t]=H):(O=g(L));return O}function E(O){var J={x:0,y:0},L=1000000,M=typeof O===q?w(O()).split(","):O.split(","),H=M.length,Q,P,I,N,K;for(K=0;K<H;K++){Q=w(M[K]).split(" ");P=Q.length;if(P===2&&Q[0].indexOf("deg")!==-1){I=parseFloat(Q[0]);N=parseFloat(Q[1]);if(typeof I===u&&typeof N===u&&N!==0){J.x+=Math.round((Math.cos(I*(Math.PI/180))*N)*L)/L;J.y+=Math.round((Math.sin(I*(Math.PI/180))*N)*L)/L}}else{if(P===1||P===2){J.x+=parseFloat(Q[0]);J.y+=P===1?parseFloat(Q[0]):parseFloat(Q[1])}}}return J}function A(J){var I=typeof J==="string"&&J.length>0?J.split(" "):"",H=I.length;if(H>0&&H<5){return{left:I[0],top:H>1?I[1]:I[0],right:H>2?I[2]:I[0],bottom:H===4?I[3]:H===1?I[0]:I[1]}}else{return null}}function y(I){var H=o.call(I)==="[object Object]"?j([n[a].defaults,I]):j([n[a].defaults]),J;for(J in H){if(typeof H[J]==="string"){H[J]=w(H[J])}}H.position=typeof H.position===q?H.position().split(" "):H.position.split(" ");H.base=typeof H.base===q?H.base():H.base;H.container=typeof H.container===q?H.container():H.container;H.offset=E(H.offset);return H}function f(L,K,J,I){var H={};H[x+x]=H[D+D]=K;H[x+b]=H[D+b]=K+(J/2);H[x+C]=H[D+t]=K+J;H[b+x]=H[b+D]=K-(I/2);H[b+b]=K+(J/2)-(I/2);H[b+C]=H[b+t]=K+J-(I/2);H[C+x]=H[t+D]=K-I;H[C+b]=H[t+b]=K-I+(J/2);H[C+C]=H[t+t]=K-I+J;return H[L]}function i(I,H,K,N,M,L,J){return{left:K[x]+N[x]-J[x],right:(J[x]+M)-(K[x]+N[x]+I),top:K[D]+N[D]-J[D],bottom:(J[D]+L)-(K[D]+N[D]+H)}}function l(S,O,L,H,T,V,N,U,I){var R="push",Q="push!",K=[[x,C],[D,t]],P,J,M;for(M=0;M<2;M++){P=K[M][0];J=K[M][1];if((I[P]===R||I[P]===Q)&&(I[J]===R||I[J]===Q)&&(U[P]<0||U[J]<0)){if(U[P]>U[J]){if(h(U[J])<=h(U[P])){L[P]-=h(U[J])}else{L[P]-=((h(U[P])+h(U[J]))/2)}}else{if(U[P]<U[J]){if(h(U[P])<=h(U[J])){L[P]+=h(U[P])}else{L[P]+=((h(U[P])+h(U[J]))/2)}}}U=i(S,O,L,H,T,V,N);if(I[P]===Q&&U[P]<0){L[P]+=h(U[P])}else{if(I[J]===Q&&U[J]<0){L[P]-=h(U[J])}}}else{if((I[P]===Q||I[P]===R)&&U[P]<0){L[P]+=h(U[P])}else{if((I[J]===Q||I[J]===R)&&U[J]<0){L[P]-=h(U[J])}}}}}function F(J,R,V){var T=y(V),W=T.onCollision,N=c(R),O=s(R),K=v(R),Q,P,H=T.base,Y,L,X,I=T.container,S,U,M;o.call(H)==="[object Array]"?(Y=L=0,X=g(H[2]||n),X[x]+=H[0],X[D]+=H[1]):(Y=c(H),L=s(H),X=g(H));Q={left:f(T.position[0]+T.position[2],X[x]+T.offset.x-K[x],Y,N),top:f(T.position[1]+T.position[3],X[D]+T.offset.y-K[D],L,O)};if(T.container){o.call(I)==="[object Array]"?(S=U=0,M=g(I[2]||n),M[x]+=I[0],M[D]+=I[1]):(S=c(I),U=s(I),M=g(I));P=i(N,O,Q,K,S,U,M);if(typeof W===q){W(Q,{target:{element:R,width:N,height:O,offset:{x:K.x+Q.x,y:K.y+Q.y},overlap:P},base:{element:H,width:Y,height:L,offset:X},container:{element:I,width:S,height:U,offset:M}})}else{W=A(W);if(W){l(N,O,Q,K,S,U,M,P,W)}}}if(J==="set"){R.style[x]=Q[x]+"px";R.style[D]=Q[D]+"px"}else{return Q}}n[a]={set:function(H,I){F("set",H,I);return this},get:function(H,I){return F("get",H,I)},defaults:{base:n,position:"center center center center",offset:"0",container:null,onCollision:"push"}}})(window);