/*!
 * Popo JS - v0.7.3 - 5/2/2013
 *
 * Copyright (c) 2013 Niklas Rämö
 * Released under the MIT license
 */
(function(l,i){var b="popo",E=l.document,A=E.documentElement,p=E.body,v=l.Math,d={},t={nw:["right","bottom","left","top"],n:["center","bottom","center","top"],ne:["left","bottom","right","top"],e:["left","center","right","center"],se:["left","top","right","bottom"],s:["center","top","center","bottom"],sw:["right","top","left","bottom"],w:["right","center","left","center"],center:["center","center","center","center"]};d.leftleft=d.toptop=function(G,m,F){return G};d.leftcenter=d.topcenter=function(G,m,F){return G+(m/2)};d.leftright=d.topbottom=function(G,m,F){return G+m};d.centerleft=d.centertop=function(G,m,F){return G-(F/2)};d.centercenter=function(G,m,F){return G+(m/2)-(F/2)};d.centerright=d.centerbottom=function(G,m,F){return G+m-(F/2)};d.rightleft=d.bottomtop=function(G,m,F){return G-F};d.rightcenter=d.bottomcenter=function(G,m,F){return G-F+(m/2)};d.rightright=d.bottombottom=function(G,m,F){return G-F+m};function o(m){return Object.prototype.toString.call(m)==="[object global]"}function g(m){return Object.prototype.toString.call(m)==="[object HTMLDocument]"}function y(m){return Object.prototype.toString.call(m)==="[object HTMLHtmlElement]"}function n(m){return Object.prototype.toString.call(m)==="[object HTMLBodyElement]"}function w(m){return typeof String.prototype.trim==="function"?m.trim():m.replace(/^\s+|\s+$/g,"")}function h(m){var G={},F,H;for(F=0;F<m.length;F++){for(H in m[F]){G[H]=m[F][H]}}F=H=null;return G}function c(m){if(o(m)){return A.clientWidth||p.clientWidth}else{if(g(m)){return v.max(A.clientWidth,A.offsetWidth,A.scrollWidth,p.scrollWidth,p.offsetWidth)}else{return m.getBoundingClientRect().width||m.offsetWidth}}}function r(m){if(o(m)){return A.clientHeight||p.clientHeight}else{if(g(m)){return v.max(A.clientHeight,A.offsetHeight,A.scrollHeight,p.scrollHeight,p.offsetHeight)}else{return m.getBoundingClientRect().height||m.offsetHeight}}}function x(){return typeof l.pageXOffset==="number"?l.pageXOffset:A.scrollLeft||p.scrollLeft}function e(){return typeof l.pageYOffset==="number"?l.pageYOffset:A.scrollTop||p.scrollTop}function f(F,I){var H=0,m=0,G;if(o(F)){H=x();m=e()}else{if(!g(F)){G=F.getBoundingClientRect();if(typeof G!=="undefined"){H=G.left+x();m=G.top+e();if(I){H+=F.clientLeft;m+=F.clientTop}}}}G=null;return{left:H,top:m}}function k(m){if(m.style.position){return m.style.position}else{if(m.currentStyle){return m.currentStyle.position}else{if(E.defaultView&&E.defaultView.getComputedStyle){return E.defaultView.getComputedStyle(m,null).getPropertyValue("position")}else{return"static"}}}}function q(m){var F;if(y(m)){F=E}else{if(n(m)){F=A}else{F=m.offsetParent;while(!y(F)&&k(F)==="static"){F=n(F)?A:F.offsetParent}}}return F}function u(I){var F=k(I),L;if(F==="fixed"){L={left:0,top:0}}else{if(F==="absolute"){L=f(q(I),true)}else{if(F!=="relative"){L=f(I)}else{var H=I.style,K=H.left,G=H.right,J=H.top,m=H.bottom;H.left=H.right=H.top=H.bottom="auto";L=f(I);H.left=K;H.right=G;H.top=J;H.bottom=m;H=K=G=J=m=null}}}F=null;return L}function D(I,H,F){var J=I.className.split(" "),m=J.length,G;for(G=0;G<m;G++){if(J[G].substring(0,H.length)===H){J.splice(G,1)}}if(F!==""){J.push(F)}I.className=J.join(" ");J=m=G=null}function z(G){var F=typeof G==="string"&&G.length!==0?G.split(" "):"",m=F.length;if(m>0&&m<5){return{left:F[0],top:m>1?F[1]:F[0],right:m>2?F[2]:F[0],bottom:m===4?F[3]:(m===1?F[0]:F[1])}}else{F=m=null;return null}}function B(m){var I={x:0,y:0},G=1000000,K=m.split(","),F=K.length,N,M,H,L,J;for(J=0;J<F;J++){N=w(K[J]).split(" ");M=N.length;if(M===2&&N[0].indexOf("deg")!==-1){H=parseFloat(N[0]);L=parseFloat(N[1]);if(typeof H==="number"&&typeof L==="number"&&L!==0){I.x+=v.round((v.cos(H*(v.PI/180))*L)*G)/G;I.y+=v.round((v.sin(H*(v.PI/180))*L)*G)/G}}else{if(M===1||M===2){I.x+=parseFloat(N[0]);I.y+=M===1?parseFloat(N[0]):parseFloat(N[1])}}}G=K=F=N=M=H=L=J=null;return I}function a(m){var F=Object.prototype.toString.call(m)==="[object Object]"?h([l[b].defaults,m]):h([l[b].defaults]),G;for(G in F){if(typeof F[G]==="string"){F[G]=w(F[G])}}if(F.setClass){F._className=b+"-"+F.position.replace(/\s+/g,"-")}F.position=F.position.split(" ");F.position=F.position.length===1?t[F.position[0]].slice(0):F.position;F.offset=B(F.offset);if(F.container!==null&&typeof F.onCollision!=="function"){F.onCollision=z(F.onCollision)}G=null;return F}function s(F,m){return{left:F.position.left+F.zeroPointOffset.left-m.offset.left,right:(m.offset.left+m.width)-(F.position.left+F.zeroPointOffset.left+F.width),top:F.position.top+F.zeroPointOffset.top-m.offset.top,bottom:(m.offset.top+m.height)-(F.position.top+F.zeroPointOffset.top+F.height)}}function j(J,K,m){var I=[["left","right"],["top","bottom"]],H,G,F;for(F=0;F<2;F++){H=I[F][0];G=I[F][1];if((J.onCollision[H]==="push"||J.onCollision[H]==="push!")&&(J.onCollision[G]==="push"||J.onCollision[G]==="push!")&&(m.overflow[H]<0||m.overflow[G]<0)){if(m.overflow[H]>m.overflow[G]){if(v.abs(m.overflow[G])<=v.abs(m.overflow[H])){K.position[H]-=v.abs(m.overflow[G])}else{K.position[H]-=((v.abs(m.overflow[H])+v.abs(m.overflow[G]))/2)}}else{if(m.overflow[H]<m.overflow[G]){if(v.abs(m.overflow[H])<=v.abs(m.overflow[G])){K.position[H]+=v.abs(m.overflow[H])}else{K.position[H]+=((v.abs(m.overflow[H])+v.abs(m.overflow[G]))/2)}}}m.overflow=s(K,m);if(J.onCollision[H]==="push!"&&m.overflow[H]<0){K.position[H]+=v.abs(m.overflow[H])}else{if(J.onCollision[G]==="push!"&&m.overflow[G]<0){K.position[H]-=v.abs(m.overflow[G])}}}else{if((J.onCollision[H]==="push!"||J.onCollision[H]==="push")&&m.overflow[H]<0){K.position[H]+=v.abs(m.overflow[H])}else{if((J.onCollision[G]==="push!"||J.onCollision[G]==="push")&&m.overflow[G]<0){K.position[H]-=v.abs(m.overflow[G])}}}}I=H=G=F=null}function C(K,G,F){var H=a(F),J={},I={},m={};if(H.setClass&&(" "+G.className+" ").indexOf(" "+H._className+" ")===-1){D(G,b,H._className)}J.element=G;J.width=c(G);J.height=r(G);J.zeroPointOffset=u(G);I.element=H.base;I.width=c(H.base);I.height=r(H.base);I.offset=f(H.base);J.position={left:d[H.position[0]+H.position[2]](I.offset.left+H.offset.x-J.zeroPointOffset.left,I.width,J.width),top:d[H.position[1]+H.position[3]](I.offset.top+H.offset.y-J.zeroPointOffset.top,I.height,J.height)};if(H.container!==null){m.element=H.container;m.width=c(H.container);m.height=r(H.container);m.offset=f(H.container);m.overflow=s(J,m);if(typeof H.onCollision==="function"){H.onCollision(J,I,m)}else{if(H.onCollision!==null){j(H,J,m)}}}if(typeof H.onBeforeExec==="function"){if(H.container!==null){m.overflow=s(J,m)}H.onBeforeExec(J,I,m)}if(K==="set"){G.style.left=J.position.left+"px";G.style.top=J.position.top+"px";if(typeof H.onAfterExec==="function"){if(H.container!==null){m.overflow=s(J,m)}H.onAfterExec(J,I,m)}H=J=I=m=null}else{H=I=m=null;return J.position}}if(typeof l[b]==="undefined"){l[b]={set:function(m,F){C("set",m,F);return this},get:function(m,F){return C("get",m,F)},defaults:{position:"center",offset:"0",base:l,container:null,onCollision:"push",setClass:false,onBeforeExec:null,onAfterExec:null}}}})(window);
